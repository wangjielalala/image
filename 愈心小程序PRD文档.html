<!DOCTYPE html><html><head>
      <title>愈心小程序PRD文档</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css">
      
      
      <script src="https://cdn.jsdelivr.net/npm/mermaid@11.9.0/dist/mermaid.min.js"></script>
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="愈她小程序产品需求文档prd">愈她小程序产品需求文档（PRD） </h1>
<h2 id="1-文档概述">1. 文档概述 </h2>
<h3 id="版本历史">版本历史 </h3>
<table>
<thead>
<tr>
<th>版本</th>
<th>日期</th>
<th>修订内容</th>
<th>修订人</th>
</tr>
</thead>
<tbody>
<tr>
<td>v1.0</td>
<td>2025-09-23</td>
<td>初版PRD文档创建</td>
<td>产品经理</td>
</tr>
<tr>
<td>v1.1</td>
<td>2025-09-23</td>
<td>新增订单模块详细设计</td>
<td>产品经理</td>
</tr>
</tbody>
</table>
<h3 id="修订记录">修订记录 </h3>
<ul>
<li>基于原型图分析完成首版PRD文档</li>
<li>涵盖首页、倾诉功能、录音功能、运势介绍等核心模块</li>
<li>v1.1: 新增订单模块详细功能设计，包含订单管理、报告查看、状态跟踪等功能</li>
</ul>
<h3 id="项目背景">项目背景 </h3>
<p>愈她小程序是一款专注于心理疗愈的小程序，旨在为抑郁、焦虑、生活困顿的用户提供心理安慰和决策参考。通过结合传统命理学，为用户提供"无所不答"的心理疗愈服务。</p>
<h3 id="产品目标">产品目标 </h3>
<ul>
<li>为94%存在焦虑的用户群体提供心理纾解服务</li>
<li>通过语音优先的交互方式降低用户使用门槛</li>
<li>结合传统命理学、八字占卜等元素增强用户信任感</li>
<li>建立完整的心理疗愈服务体系</li>
</ul>
<h2 id="2-功能清单">2. 功能清单 </h2>
<table>
<thead>
<tr>
<th>模块名称</th>
<th>页面/功能</th>
<th>优先级</th>
<th>状态</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>倾诉服务</strong></td>
<td>不开心倾诉</td>
<td>P0</td>
<td>待开发</td>
<td>核心业务功能</td>
</tr>
<tr>
<td>倾诉服务</td>
<td>异步倾诉</td>
<td>P0</td>
<td>待开发</td>
<td>支持异步交流</td>
</tr>
<tr>
<td>倾诉服务</td>
<td>预约倾诉</td>
<td>P1</td>
<td>待开发</td>
<td>预约深度倾诉服务</td>
</tr>
<tr>
<td>倾诉服务</td>
<td>倾诉服务倒计时</td>
<td>P0</td>
<td>待开发</td>
<td>服务时间管理和提醒</td>
</tr>
<tr>
<td>倾诉服务</td>
<td>服务状态管理</td>
<td>P0</td>
<td>待开发</td>
<td>进行中、已结束状态跟踪</td>
</tr>
<tr>
<td>倾诉服务</td>
<td>服务评价</td>
<td>P1</td>
<td>待开发</td>
<td>服务结束后评价功能</td>
</tr>
<tr>
<td><strong>运势模块</strong></td>
<td>健康运势分析</td>
<td>P1</td>
<td>待开发</td>
<td>健康相关命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>事业运势分析</td>
<td>P1</td>
<td>待开发</td>
<td>事业相关命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>感情运势分析</td>
<td>P1</td>
<td>待开发</td>
<td>感情相关命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>财运分析</td>
<td>P1</td>
<td>待开发</td>
<td>财运相关命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>学业运势分析</td>
<td>P1</td>
<td>待开发</td>
<td>学业相关命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>人际关系分析</td>
<td>P1</td>
<td>待开发</td>
<td>人际关系命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>综合运势分析</td>
<td>P1</td>
<td>待开发</td>
<td>综合命理分析</td>
</tr>
<tr>
<td>运势模块</td>
<td>其他功能分析</td>
<td>P2</td>
<td>待开发</td>
<td>其他命理相关功能</td>
</tr>
<tr>
<td><strong>认证模块</strong></td>
<td>用户登录注册</td>
<td>P0</td>
<td>待开发</td>
<td>用户身份验证</td>
</tr>
<tr>
<td>认证模块</td>
<td>微信登录</td>
<td>P0</td>
<td>待开发</td>
<td>微信授权登录</td>
</tr>
<tr>
<td>认证模块</td>
<td>账号密码登录</td>
<td>P1</td>
<td>待开发</td>
<td>传统账号密码登录</td>
</tr>
<tr>
<td>认证模块</td>
<td>首次登录信息完善</td>
<td>P0</td>
<td>待开发</td>
<td>新用户信息收集</td>
</tr>
<tr>
<td>认证模块</td>
<td>登录状态管理</td>
<td>P0</td>
<td>待开发</td>
<td>Token管理和自动登录</td>
</tr>
<tr>
<td><strong>用户管理</strong></td>
<td>个人中心</td>
<td>P0</td>
<td>待开发</td>
<td>用户信息展示和管理入口</td>
</tr>
<tr>
<td>用户管理</td>
<td>生日设置</td>
<td>P0</td>
<td>待开发</td>
<td>公历/农历生日精确设置</td>
</tr>
<tr>
<td>用户管理</td>
<td>个人资料管理</td>
<td>P1</td>
<td>待开发</td>
<td>修改个人信息、生日设置</td>
</tr>
<tr>
<td>用户管理</td>
<td>账号设置</td>
<td>P1</td>
<td>待开发</td>
<td>账号和密码管理</td>
</tr>
<tr>
<td>用户管理</td>
<td>帮助反馈</td>
<td>P2</td>
<td>待开发</td>
<td>帮助中心和问题反馈</td>
</tr>
<tr>
<td><strong>大家都在问</strong></td>
<td>咨询必读问题</td>
<td>P1</td>
<td>待开发</td>
<td>用户常见问题展示</td>
</tr>
<tr>
<td>大家都在问</td>
<td>问题详情页</td>
<td>P1</td>
<td>待开发</td>
<td>单个问题的详细回答</td>
</tr>
<tr>
<td>大家都在问</td>
<td>问题分类展示</td>
<td>P1</td>
<td>待开发</td>
<td>倾诉须知和测算须知分类</td>
</tr>
<tr>
<td>大家都在问</td>
<td>问题列表管理</td>
<td>P1</td>
<td>待开发</td>
<td>问题的组织和展示</td>
</tr>
<tr>
<td><strong>消息通信</strong></td>
<td>消息中心</td>
<td>P0</td>
<td>待开发</td>
<td>消息统一入口</td>
</tr>
<tr>
<td>消息通信</td>
<td>倾诉聊天页面</td>
<td>P0</td>
<td>待开发</td>
<td>倾诉对话界面</td>
</tr>
<tr>
<td>消息通信</td>
<td>语音转文字</td>
<td>P0</td>
<td>待开发</td>
<td>语音识别转文字输入</td>
</tr>
<tr>
<td>消息通信</td>
<td>录音状态显示</td>
<td>P1</td>
<td>待开发</td>
<td>录音过程状态反馈</td>
</tr>
<tr>
<td>消息通信</td>
<td>录音波形显示</td>
<td>P1</td>
<td>待开发</td>
<td>录音可视化反馈</td>
</tr>
<tr>
<td>消息通信</td>
<td>识别结果编辑</td>
<td>P0</td>
<td>待开发</td>
<td>用户可编辑识别后的文字</td>
</tr>
<tr>
<td>消息通信</td>
<td>识别异常处理</td>
<td>P1</td>
<td>待开发</td>
<td>识别失败时的重录或手动输入</td>
</tr>
<tr>
<td>消息通信</td>
<td>联系客服</td>
<td>P1</td>
<td>待开发</td>
<td>客服对话功能</td>
</tr>
<tr>
<td>消息通信</td>
<td>客服状态显示</td>
<td>P1</td>
<td>待开发</td>
<td>在线/离线状态显示</td>
</tr>
<tr>
<td>消息通信</td>
<td>离线留言</td>
<td>P1</td>
<td>待开发</td>
<td>客服离线时的留言功能</td>
</tr>
<tr>
<td>消息通信</td>
<td>系统通知</td>
<td>P1</td>
<td>待开发</td>
<td>系统消息推送</td>
</tr>
<tr>
<td>消息通信</td>
<td>消息推送</td>
<td>P1</td>
<td>待开发</td>
<td>实时消息通知</td>
</tr>
<tr>
<td>消息通信</td>
<td>消息状态管理</td>
<td>P1</td>
<td>待开发</td>
<td>已读/未读状态管理</td>
</tr>
<tr>
<td><strong>交易模块</strong></td>
<td>积分充值</td>
<td>P0</td>
<td>待开发</td>
<td>通过客服扫码充值功能</td>
</tr>
<tr>
<td>交易模块</td>
<td>充值流程引导</td>
<td>P0</td>
<td>待开发</td>
<td>4步充值流程弹窗说明</td>
</tr>
<tr>
<td>交易模块</td>
<td>客服充值辅助</td>
<td>P0</td>
<td>待开发</td>
<td>客服发送收款码协助用户充值</td>
</tr>
<tr>
<td>交易模块</td>
<td>客服快捷操作</td>
<td>P1</td>
<td>待开发</td>
<td>积分充值、问题反馈等快捷按钮</td>
</tr>
<tr>
<td>交易模块</td>
<td>充值档位选择</td>
<td>P0</td>
<td>待开发</td>
<td>多种充值档位和自定义金额</td>
</tr>
<tr>
<td>交易模块</td>
<td>积分消费</td>
<td>P0</td>
<td>待开发</td>
<td>积分下单支付功能</td>
</tr>
<tr>
<td>交易模块</td>
<td>积分明细</td>
<td>P1</td>
<td>待开发</td>
<td>积分收支记录查看</td>
</tr>
<tr>
<td>交易模块</td>
<td>明细筛选</td>
<td>P1</td>
<td>待开发</td>
<td>按类型和时间筛选积分记录</td>
</tr>
<tr>
<td>交易模块</td>
<td>余额检查</td>
<td>P0</td>
<td>待开发</td>
<td>下单前积分余额验证</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单列表</td>
<td>P1</td>
<td>待开发</td>
<td>订单管理主页面</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单详情</td>
<td>P1</td>
<td>待开发</td>
<td>订单状态跟踪</td>
</tr>
<tr>
<td>交易模块</td>
<td>我的报告</td>
<td>P1</td>
<td>待开发</td>
<td>服务报告查看</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单状态管理</td>
<td>P1</td>
<td>待开发</td>
<td>待接单/处理中/已完成/已驳回等状态</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单创建</td>
<td>P0</td>
<td>待开发</td>
<td>服务下单功能</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单支付</td>
<td>P0</td>
<td>待开发</td>
<td>积分支付功能</td>
</tr>
<tr>
<td>交易模块</td>
<td>弹窗提醒</td>
<td>P2</td>
<td>待开发</td>
<td>订单状态变更提醒</td>
</tr>
<tr>
<td>交易模块</td>
<td>订单评价</td>
<td>P1</td>
<td>待开发</td>
<td>服务完成后评价</td>
</tr>
</tbody>
</table>
<h2 id="3-用户角色说明">3. 用户角色说明 </h2>
<table>
<thead>
<tr>
<th>角色名称</th>
<th>权限范围</th>
<th>主要职责</th>
<th>使用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>普通用户</td>
<td>基础功能使用</td>
<td>倾诉、咨询、获取心理安慰</td>
<td>情绪低落、焦虑时寻求帮助</td>
</tr>
<tr>
<td>后台人员</td>
<td>订单处理权限</td>
<td>接单、处理订单、驳回订单</td>
<td>处理用户倾诉订单</td>
</tr>
<tr>
<td>系统管理员</td>
<td>全部权限</td>
<td>系统维护、用户管理</td>
<td>后台管理和运营</td>
</tr>
</tbody>
</table>
<h2 id="4-核心流程图">4. 核心流程图 </h2>
<h3 id="41-愈她小程序业务架构图">4.1 愈她小程序业务架构图 </h3>
<div class="mermaid">graph TB
    subgraph "前端展示层"
        A[前端门户&lt;br/&gt;• 小程序首页&lt;br/&gt;• 倾诉聊天页&lt;br/&gt;• 个人中心&lt;br/&gt;• 消息中心&lt;br/&gt;• 订单页面]
    end
    
    subgraph "业务服务层"
        B[倾诉服务&lt;br/&gt;• 不开心倾诉&lt;br/&gt;• 异步倾诉&lt;br/&gt;• 预约倾诉&lt;br/&gt;• 服务状态管理&lt;br/&gt;• 服务评价]
        C[运势服务&lt;br/&gt;• 健康运势&lt;br/&gt;• 事业运势&lt;br/&gt;• 感情运势&lt;br/&gt;• 财运分析&lt;br/&gt;• 学业运势&lt;br/&gt;• 人际关系&lt;br/&gt;• 综合运势]
        D[消息通信&lt;br/&gt;• 消息中心&lt;br/&gt;• 语音转文字&lt;br/&gt;• 聊天对话&lt;br/&gt;• 客服系统&lt;br/&gt;• 系统通知&lt;br/&gt;• 消息推送]
        E[交易服务&lt;br/&gt;• 积分充值&lt;br/&gt;• 订单管理&lt;br/&gt;• 支付处理&lt;br/&gt;• 积分明细&lt;br/&gt;• 余额检查&lt;br/&gt;• 订单状态]
        F[用户服务&lt;br/&gt;• 认证登录&lt;br/&gt;• 个人资料&lt;br/&gt;• 生日设置&lt;br/&gt;• 账号管理&lt;br/&gt;• 帮助反馈]
        G[FAQ服务&lt;br/&gt;• 咨询必读&lt;br/&gt;• 问题详情&lt;br/&gt;• 问题分类&lt;br/&gt;• 问题管理]
    end
    
    subgraph "数据存储层"
        H[数据存储&lt;br/&gt;• 用户数据库&lt;br/&gt;• 对话记录库&lt;br/&gt;• 订单数据库&lt;br/&gt;• 运势数据库&lt;br/&gt;• 消息数据库&lt;br/&gt;• FAQ数据库]
    end
    
    subgraph "外部服务层"
        I[外部服务&lt;br/&gt;• 语音识别API&lt;br/&gt;• 微信登录API&lt;br/&gt;• 收款码服务&lt;br/&gt;• 推送服务]
    end
    
    %% 前端到业务层连接
    A --&gt; B
    A --&gt; C
    A --&gt; D
    A --&gt; E
    A --&gt; F
    A --&gt; G
    
    %% 业务层到数据层连接
    B --&gt; H
    C --&gt; H
    D --&gt; H
    E --&gt; H
    F --&gt; H
    G --&gt; H
    
    %% 业务层到外部服务连接
    D --&gt; I
    E --&gt; I
    F --&gt; I
    
    %% 样式定义
    classDef frontend fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef business fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef data fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef external fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    
    class A frontend
    class B,C,D,E,F,G business
    class H data
    class I external
</div><h3 id="42-用户倾诉流程">4.2 用户倾诉流程 </h3>
<div class="mermaid">graph TB
    A[用户进入首页] --&gt; B{选择倾诉方式}
    B --&gt;|异步倾诉| C[选择异步倾诉服务]
    B --&gt;|预约倾诉| D[选择时间和服务类型]
    C --&gt; E[确认服务信息]
    D --&gt; F[确认预约信息]
    E --&gt; G{检查积分余额}
    F --&gt; G
    G --&gt;|余额充足| H[积分支付下单]
    G --&gt;|余额不足| I[跳转积分充值]
    I --&gt; J[联系客服充值]
    J --&gt; H
    H --&gt; K[创建订单并开始倒计时]
    K --&gt; L{服务类型}
    L --&gt;|异步倾诉| M[立即开始对话]
    L --&gt;|预约倾诉| N[等待预约时间]
    N --&gt; M
    M --&gt; O[录音转文字/直接文字输入]
    O --&gt; P[系统记录倾诉内容]
    P --&gt; Q{倒计时是否结束}
    Q --&gt;|未结束| R[继续对话]
    Q --&gt;|已结束| S[自动结单]
    R --&gt; O
    S --&gt; T[服务结束]
</div><h3 id="43-积分充值流程">4.3 积分充值流程 </h3>
<div class="mermaid">graph TB
    A[用户点击充值] --&gt; B[选择充值档位]
    B --&gt; C[点击立即充值]
    C --&gt; D[显示充值积分流程弹窗]
    D --&gt; E[步骤1：点击联系客服]
    E --&gt; F[跳转客服聊天页面]
    F --&gt; G[步骤2：点击积分充值按钮]
    G --&gt; H[客服发送收款码]
    H --&gt; I[步骤3：扫码收款码进行支付]
    I --&gt; J[用户完成支付]
    J --&gt; K[步骤4：支付截图给客服]
    K --&gt; L[客服告知充值成功]
    L --&gt; M[等待30秒积分到账]
    M --&gt; N[积分自动到账]
    N --&gt; O[更新积分余额]
    O --&gt; P[发送充值成功通知]
    P --&gt; Q[返回积分页面]
    
    F --&gt; R[用户可选择问题反馈或投诉建议]
    R --&gt; S[处理其他问题]
</div><h3 id="44-倾诉服务倒计时流程">4.4 倾诉服务倒计时流程 </h3>
<div class="mermaid">graph TB
    A[服务开始] --&gt; B[启动倒计时]
    B --&gt; C[显示倒计时界面]
    C --&gt; D[用户进行对话]
    D --&gt; E{检查倒计时状态}
    E --&gt;|剩余时间&gt;1分钟| F[继续对话]
    E --&gt;|剩余时间≤1分钟| G[显示红色闪烁提醒]
    E --&gt;|时间已到| H[自动结单]
    F --&gt; D
    G --&gt; I{用户操作}
    I --&gt;|继续对话| D
    H --&gt; K[禁用输入框]

</div><h3 id="45-录音转文字交互流程">4.5 录音转文字交互流程 </h3>
<div class="mermaid">graph TB
    A[用户长按录音按钮] --&gt; B[开始录音]
    B --&gt; C[显示录音状态和波形]
    C --&gt; D[用户松开按钮]
    D --&gt; E[录音完成]
    E --&gt; F[语音识别处理]
    F --&gt; G{识别结果}
    G --&gt;|识别成功| H[将文字填入输入框]
    G --&gt;|识别失败| I[提示识别失败]
    H --&gt; J[用户可编辑识别文字]
    J --&gt; K[用户发送文字消息]
    I --&gt; L[用户选择重新录音或手动输入]
    L --&gt; A
    K --&gt; M[等待AI文字回复]
</div><h3 id="46-大家都在问流程">4.6 大家都在问流程 </h3>
<div class="mermaid">graph TB
    A[用户进入首页] --&gt; B{查看大家都在问}
    B --&gt;|首页显示问题列表| C[点击具体问题]
    B --&gt;|点击查看全部| D[进入大家都在问页面]
    
    D --&gt; E[显示咨询必读10问]
    E --&gt; F[展示两个分类]
    
    F --&gt; G[倾诉须知分类]
    F --&gt; H[8大功能测算须知分类]
    
    G --&gt; I[点击倾诉相关问题]
    H --&gt; J[点击测算相关问题]
    C --&gt; K[查看问题详情页面]
    I --&gt; K
    J --&gt; K
    
    K --&gt; L[显示详细回答内容]
    L --&gt; M{用户操作}
    
    M --&gt;|返回| N[返回上一页]
    M --&gt;|已了解| O{选择服务}
    
    O --&gt;|我要倾诉| P[跳转到倾诉功能]
    O --&gt;|我要测算| Q[跳转到测算功能]
    
    P --&gt; R[开始倾诉下单流程]
    Q --&gt; S[开始测算下单流程]
    
    N --&gt; D
    
    D --&gt; T[底部操作按钮]
    T --&gt; U[我要倾诉]
    T --&gt; V[我要测算]
    
    U --&gt; P
    V --&gt; Q
</div><h3 id="47-八大功能通用流程">4.7 八大功能通用流程 </h3>
<div class="mermaid">graph TB
    A[用户进入首页] --&gt; B[选择功能模块]
    B --&gt; C{功能类型}
    
    C --&gt;|健康运势| D1[健康运势分析]
    C --&gt;|事业运势| D2[事业运势分析]
    C --&gt;|感情运势| D3[感情运势分析]
    C --&gt;|财运分析| D4[财运分析]
    C --&gt;|学业运势| D5[学业运势分析]
    C --&gt;|人际关系| D6[人际关系分析]
    C --&gt;|综合运势| D7[综合运势分析]
    C --&gt;|其他功能| D8[其他功能分析]
    
    D1 --&gt; E[填写个人信息]
    D2 --&gt; E
    D3 --&gt; E
    D4 --&gt; E
    D5 --&gt; E
    D6 --&gt; E
    D7 --&gt; E
    D8 --&gt; E
    
    E --&gt; F[确认提问内容]
    F --&gt; G[点击结算]
    G --&gt; H{检查积分余额}
    
    H --&gt;|积分充足| I[确认支付]
    H --&gt;|积分不足| J[跳转充值页面]
    J --&gt; K[联系客服充值]
    K --&gt; I
    
    I --&gt; L[扣除积分]
    L --&gt; M[系统生成订单]
    M --&gt; N[订单状态：待接单]
    
    N --&gt; O[后台人员接单]
    O --&gt; P[订单状态：处理中]
    P --&gt; Q[后台人员处理分析]
    Q --&gt; R[生成分析报告]
    R --&gt; S[订单状态：已完成]
    S --&gt; T[用户查看报告]
    T --&gt; U[服务结束]
</div><h3 id="48-订单管理流程">4.8 订单管理流程 </h3>
<div class="mermaid">flowchart TD

fill_info[用户选择选择并填写
    需求信息]
    fill_info --&gt; checkout[点击结算]
    checkout --&gt; check_credits{检查积分余额}
    check_credits --&gt;|余额充足| confirm_pay[确认积分支付]
    check_credits --&gt;|余额不足| recharge[跳转积分充值]
    recharge --&gt; recharge_success[联系客服充值]
    recharge_success --&gt; confirm_pay
    confirm_pay --&gt; deduct_credits[扣除积分]
    deduct_credits --&gt; order_created[系统生成订单]
    order_created --&gt; wait_accept[订单状态：待接单]
    wait_accept --&gt; admin_accept[后台人员接单]
    admin_accept --&gt; processing[订单状态：处理中]
    processing --&gt; admin_process{后台人员处理}
    admin_process --&gt;|处理完成| completed[订单状态：已完成]
    admin_process --&gt;|驳回订单| rejected[订单状态：已驳回]

</div><h3 id="49-订单状态流转图">4.9 订单状态流转图 </h3>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; 待接单: 创建订单
    待接单 --&gt; 处理中: 后台人员接单
    处理中 --&gt; 已完成: 后台人员处理完成
    处理中 --&gt; 已驳回: 后台人员驳回
    已完成 --&gt; [*]: 用户确认
    已驳回 --&gt; [*]: 流程结束
    
    待接单 --&gt; 已取消: 用户取消
    已取消 --&gt; 已完成: 退积分处理
</div><h3 id="410-用户操作序列图">4.10 用户操作序列图 </h3>
<div class="mermaid">sequenceDiagram
    participant U as 用户
    participant F as 前端
    participant B as 后端
    participant AI as AI服务
    participant DB as 数据库
    
    U-&gt;&gt;F: 点击不开心倾诉
    F-&gt;&gt;B: 请求倾诉服务
    B-&gt;&gt;DB: 查询用户信息
    DB--&gt;&gt;B: 返回用户数据
    B--&gt;&gt;F: 返回服务选项
    F--&gt;&gt;U: 显示倾诉选择页面
    
    U-&gt;&gt;F: 选择异步倾诉并填写需求信息
    F-&gt;&gt;B: 提交服务需求
    U-&gt;&gt;F: 点击结算
    F-&gt;&gt;B: 创建支付订单
    B-&gt;&gt;DB: 保存订单信息
    B--&gt;&gt;F: 返回支付信息
    F--&gt;&gt;U: 显示支付页面
    
    U-&gt;&gt;F: 确认支付
    F-&gt;&gt;B: 处理支付
    B-&gt;&gt;DB: 更新订单状态为处理中
    B-&gt;&gt;B: 系统准备服务
    B-&gt;&gt;DB: 更新订单状态为进行中
    B--&gt;&gt;F: 支付成功，服务已启动
    F--&gt;&gt;U: 显示订单生成成功
    
    U-&gt;&gt;F: 录音转文字后发送消息
    F-&gt;&gt;B: 发送文字内容
    B-&gt;&gt;B: 处理文字消息
    B-&gt;&gt;DB: 保存倾诉记录
    B--&gt;&gt;F: 确认消息已保存
    F--&gt;&gt;U: 显示消息已记录
</div><h3 id="411-订单操作序列图">4.11 订单操作序列图 </h3>
<div class="mermaid">sequenceDiagram
    participant U as 用户
    participant F as 前端
    participant B as 后端
    participant S as 服务系统
    participant P as 消息系统
    participant N as 通知系统
    
    U-&gt;&gt;F: 创建预约订单
    F-&gt;&gt;B: 提交订单信息
    B-&gt;&gt;P: 发起客服充值协助
    P--&gt;&gt;B: 客服充值协助完成
    B-&gt;&gt;N: 发送订单通知
    N--&gt;&gt;U: 通知用户订单创建成功
    
    B-&gt;&gt;S: 启动倾诉服务
    S-&gt;&gt;B: 开始服务
    B-&gt;&gt;N: 发送服务开始通知
    N--&gt;&gt;U: 通知用户服务已开始
    
    S-&gt;&gt;B: 完成服务并生成报告
    B-&gt;&gt;N: 发送报告完成通知
    N--&gt;&gt;U: 通知用户查看服务报告
    
    U-&gt;&gt;F: 查看报告并评价
    F-&gt;&gt;B: 提交评价
    B--&gt;&gt;F: 订单完成确认
</div><h3 id="412-消息中心流程图">4.12 消息中心流程图 </h3>
<div class="mermaid">flowchart TD
    A[用户进入消息中心] --&gt; B[显示消息列表]
    B --&gt; C{消息类型}
    
    C --&gt;|不开心倾诉| D[倾诉消息]
    C --&gt;|系统通知| E[系统通知消息]
    C --&gt;|联系客服| F[客服消息]
    
    D --&gt; D1[显示倾诉对话记录]
    D1 --&gt; D2{用户状态}
    D2 --&gt;|在线| D3[显示在线状态]
    D2 --&gt;|离线| D4[显示离线状态]
    D3 --&gt; D5[点击进入倾诉聊天]
    D4 --&gt; D5
    D5 --&gt; D6[继续倾诉对话]
    
    E --&gt; E1[显示系统通知列表]
    E1 --&gt; E2{通知类型}
    E2 --&gt;|订单通知| E3[订单处理完成通知]
    E2 --&gt;|充值通知| E4[充值成功通知]
    E2 --&gt;|系统公告| E5[系统维护公告]
    E3 --&gt; E6[点击查看订单详情]
    E4 --&gt; E7[点击查看积分明细]
    E5 --&gt; E8[查看公告详情]
    
    F --&gt; F1[显示客服对话]
    F1 --&gt; F2{客服状态}
    F2 --&gt;|在线| F3[显示客服在线]
    F2 --&gt;|离线| F4[显示离线状态]
    F3 --&gt; F5[实时客服对话]
    F4 --&gt; F6[留言等待回复]
    F5 --&gt; F7[发送消息]
    F6 --&gt; F8[提交问题]
    F7 --&gt; F9{消息类型}
    F8 --&gt; F10[等待客服回复]
    
    F9 --&gt;|文本消息| F11[发送文本]
    F9 --&gt;|图片消息| F12[发送图片]
    F9 --&gt;|录音转文字| F13[语音转文字发送]
    
    F11 --&gt; F14[客服回复]
    F12 --&gt; F14
    F13 --&gt; F14
    F14 --&gt; F15{问题解决}
    F15 --&gt;|已解决| F16[结束对话]
    F15 --&gt;|未解决| F17[继续咨询]
    F17 --&gt; F7
    
    F10 --&gt; F18[收到客服回复通知]
    F18 --&gt; F19[查看回复内容]
    F19 --&gt; F20{是否满意}
    F20 --&gt;|满意| F21[结束对话]
    F20 --&gt;|不满意| F22[继续提问]
    F22 --&gt; F8
</div><h3 id="413-消息通知触发流程">4.13 消息通知触发流程 </h3>
<div class="mermaid">flowchart TD
    A[系统事件触发] --&gt; B{事件类型}
    
    B --&gt;|订单状态变更| C[订单通知]
    B --&gt;|充值成功| D[充值通知]
    B --&gt;|倾诉服务| E[倾诉通知]
    B --&gt;|客服回复| F[客服通知]
    B --&gt;|系统维护| G[系统公告]
    
    C --&gt; C1{订单状态}
    C1 --&gt;|待接单| C2[发送订单创建通知]
    C1 --&gt;|处理中| C3[发送订单处理通知]
    C1 --&gt;|已完成| C4[发送订单完成通知]
    C1 --&gt;|已驳回| C5[发送订单驳回通知]
    
    D --&gt; D1[发送充值成功通知]
    D1 --&gt; D2[更新积分余额显示]
    
    E --&gt; E1{倾诉状态}
    E1 --&gt;|服务开始| E2[发送服务开始通知]
    E1 --&gt;|服务进行中| E3[发送服务进度通知]
    E1 --&gt;|服务结束| E4[发送服务结束通知]
    
    F --&gt; F1[发送客服回复通知]
    F1 --&gt; F2[更新消息未读数]
    
    G --&gt; G1[发送系统公告通知]
    G1 --&gt; G2[推送到所有用户]
    
    C2 --&gt; H[写入消息数据库]
    C3 --&gt; H
    C4 --&gt; H
    C5 --&gt; H
    D1 --&gt; H
    E2 --&gt; H
    E3 --&gt; H
    E4 --&gt; H
    F1 --&gt; H
    G1 --&gt; H
    
    H --&gt; I[更新消息中心]
    I --&gt; J[推送消息通知]
    J --&gt; K[用户接收通知]
</div><h3 id="414-客服对话状态管理流程">4.14 客服对话状态管理流程 </h3>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; 等待接入: 用户发起客服咨询
    等待接入 --&gt; 对话中: 客服接入
    等待接入 --&gt; 离线留言: 客服离线
    
    对话中 --&gt; 等待回复: 用户发送消息
    等待回复 --&gt; 对话中: 客服回复
    对话中 --&gt; 会话结束: 用户/客服结束对话
    
    离线留言 --&gt; 等待处理: 用户提交问题
    等待处理 --&gt; 已回复: 客服处理并回复
    已回复 --&gt; 对话中: 用户查看回复并继续咨询
    已回复 --&gt; 会话结束: 用户满意结束咨询
    
    会话结束 --&gt; [*]: 对话记录归档
    
    note right of 对话中
        支持文本、语音、图片消息
        显示客服在线状态
        实时消息推送
    end note
    
    note right of 离线留言
        记录用户问题
        客服上线后处理
        异步回复机制
    end note
</div><h3 id="415-消息中心架构图">4.15 消息中心架构图 </h3>
<div class="mermaid">graph TB
    subgraph "消息中心前端"
        A1[消息列表页]
        A2[倾诉聊天页]
        A3[客服聊天页]
        A4[系统通知页]
        A5[消息推送组件]
    end
    
    subgraph "消息服务层"
        B1[消息路由服务]
        B2[倾诉消息服务]
        B3[客服消息服务]
        B4[系统通知服务]
        B5[消息推送服务]
        B6[客服充值辅助服务]
    end
    
    subgraph "数据存储层"
        C1[倾诉对话记录]
        C2[客服对话记录]
        C3[系统通知记录]
        C4[消息状态表]
        C5[用户消息配置]
    end
    
    subgraph "外部服务"
        D1[WebSocket服务]
        D2[推送服务]
        D3[语音识别服务]
        D4[图片存储服务]
    end
    
    A1 --&gt; B1
    A2 --&gt; B2
    A3 --&gt; B3
    A4 --&gt; B4
    A5 --&gt; B5
    
    B1 --&gt; C4
    B2 --&gt; C1
    B3 --&gt; C2
    B4 --&gt; C3
    B5 --&gt; C5
    B6 --&gt; C2
    
    B2 --&gt; D1
    B3 --&gt; D1
    B5 --&gt; D2
    B2 --&gt; D3
    B3 --&gt; D3
    B2 --&gt; D4
    B3 --&gt; D4
</div><h3 id="416-用户个人中心流程图">4.16 用户个人中心流程图 </h3>
<div class="mermaid">flowchart TD
    A[用户进入个人中心] --&gt; B{用户登录状态}
    
    B --&gt;|未登录| C[显示登录/注册按钮]
    B --&gt;|已登录| D[显示用户信息]
    
    C --&gt; E[点击登录/注册]
    E --&gt; F[跳转登录页面]
    F --&gt; G[完成登录]
    G --&gt; D
    
    D --&gt; H[个人中心功能列表]
    H --&gt; I{选择功能}
    
    I --&gt;|修改信息| J[个人资料管理]
    I --&gt;|我的积分| K[积分管理页面]
    I --&gt;|账号设置| L[账号密码设置]
    I --&gt;|联系客服| M[跳转客服页面]
    I --&gt;|帮助反馈| N[帮助中心]
    I --&gt;|退出登录| O[退出确认]
    
    J --&gt; J1[修改个人信息]
    J1 --&gt; J2[保存修改]
    J2 --&gt; J3[返回个人中心]
    
    K --&gt; K1[显示积分余额]
    K1 --&gt; K2{用户操作}
    K2 --&gt;|积分明细| K3[查看积分记录]
    K2 --&gt;|积分充值| K4[选择充值档位]
    K3 --&gt; K5[积分明细页面]
    K4 --&gt; K6[联系客服充值]
    K6 --&gt; K7[充值成功]
    K7 --&gt; K1
    
    L --&gt; L1[账号设置页面]
    L1 --&gt; L2{设置类型}
    L2 --&gt;|修改密码| L3[密码修改流程]
    L2 --&gt;|绑定手机| L4[手机绑定流程]
    
    O --&gt; O1[确认退出]
    O1 --&gt; O2[清除登录状态]
    O2 --&gt; C
</div><h3 id="417-积分充值详细流程">4.17 积分充值详细流程 </h3>
<div class="mermaid">flowchart TD
    A[用户点击积分充值] --&gt; B[显示充值档位]
    B --&gt; C[充值档位选择]
    
    C --&gt; D{档位类型}
    D --&gt;|推荐档位| E[1积分/1元]
    D --&gt;|标准档位| F[6积分/6元, 30积分/30元]
    D --&gt;|优惠档位| G[98积分/98元, 298积分/298元, 518积分/518元]
    D --&gt;|自定义| H[自定义金额输入]
    
    E --&gt; I[确认充值金额]
    F --&gt; I
    G --&gt; I
    H --&gt; H1[输入自定义金额]
    H1 --&gt; I
    
    I --&gt; J[点击立即充值]
    J --&gt; K[显示充值积分流程弹窗]
    K --&gt; L[显示4步充值流程说明]
    L --&gt; M[步骤1：点击联系客服]
    M --&gt; N[步骤2：点击积分充值]
    N --&gt; O[步骤3：扫码收款码进行支付后支付截图给客服]
    O --&gt; P[步骤4：客服告知充值成功后等待30秒积分到账]
    
    P --&gt; Q[用户点击去联系客服按钮]
    Q --&gt; R[跳转到客服聊天页面]
    R --&gt; S[客服页面显示快捷操作按钮]
    S --&gt; T[用户点击积分充值按钮]
    T --&gt; U[客服发送收款码图片]
    U --&gt; V[用户扫码支付]
    V --&gt; W[用户发送支付截图]
    W --&gt; X[客服确认支付]
    X --&gt; Y[客服手动充值积分]
    Y --&gt; Z[系统自动到账通知]
    Z --&gt; AA[积分余额更新]
    AA --&gt; BB[返回积分页面]
</div><h3 id="418-积分明细管理流程">4.18 积分明细管理流程 </h3>
<div class="mermaid">flowchart TD
    A[用户进入积分明细] --&gt; B[显示筛选条件]
    B --&gt; C[默认显示全部交易类型]
    
    C --&gt; D[积分记录列表]
    D --&gt; E{用户操作}
    
    E --&gt;|筛选类型| F[点击全部交易类型]
    E --&gt;|筛选时间| G[选择时间范围]
    E --&gt;|查看详情| H[点击具体记录]
    
    F --&gt; F1[显示类型弹窗]
    F1 --&gt; F2{选择类型}
    F2 --&gt;|All| F3[显示所有记录]
    F2 --&gt;|健康运势| F4[显示健康运势相关]
    F2 --&gt;|异步倾诉| F5[显示倾诉相关]
    F2 --&gt;|财运运势| F6[显示财运相关]
    F2 --&gt;|预约倾诉| F7[显示预约相关]
    F2 --&gt;|事业运势| F8[显示事业相关]
    F2 --&gt;|感情运势| F9[显示感情相关]
    F2 --&gt;|交友运势| F10[显示交友相关]
    F2 --&gt;|子女缘分| F11[显示子女相关]
    F2 --&gt;|福气运势| F12[显示福气相关]
    F2 --&gt;|性格测试| F13[显示性格测试相关]
    
    F3 --&gt; I[更新记录显示]
    F4 --&gt; I
    F5 --&gt; I
    F6 --&gt; I
    F7 --&gt; I
    F8 --&gt; I
    F9 --&gt; I
    F10 --&gt; I
    F11 --&gt; I
    F12 --&gt; I
    F13 --&gt; I
    
    G --&gt; G1[显示时间选择器]
    G1 --&gt; G2[选择年月]
    G2 --&gt; G3[确认时间范围]
    G3 --&gt; I
    
    H --&gt; H1[显示记录详情]
    H1 --&gt; H2[记录详细信息]
    H2 --&gt; H3[返回列表]
    H3 --&gt; D
    
    I --&gt; D
</div><h3 id="419-用户登录注册流程">4.19 用户登录注册流程 </h3>
<div class="mermaid">flowchart TD
    A[用户访问需要登录的功能] --&gt; B{用户登录状态}
    
    B --&gt;|已登录| C[直接访问功能]
    B --&gt;|未登录| D[跳转登录页面]
    
    D --&gt; E[显示登录主页面]
    E --&gt; F[显示愈她LOGO和品牌名]
    F --&gt; G{用户选择登录方式}
    
    G --&gt;|微信登录| H[点击微信登录按钮]
    G --&gt;|账号密码登录| I[点击账号密码登录]
    
    H --&gt; H1[调用微信授权]
    H1 --&gt; H2{微信授权结果}
    H2 --&gt;|授权成功| H3[获取微信用户信息]
    H2 --&gt;|授权失败| H4[返回登录页面]
    H3 --&gt; J[登录成功]
    H4 --&gt; G
    
    I --&gt; I1[进入账号密码登录页面]
    I1 --&gt; I2[显示账号输入框]
    I2 --&gt; I3[显示密码输入框]
    I3 --&gt; I4[用户输入账号密码]
    I4 --&gt; I5[点击登录按钮]
    I5 --&gt; I6{验证账号密码}
    I6 --&gt;|验证成功| J
    I6 --&gt;|验证失败| I7[显示错误提示]
    I7 --&gt; I4
    
    J --&gt; K{检查用户协议同意状态}
    K --&gt;|未同意| L[显示协议同意提示]
    K --&gt;|已同意| M{是否首次登录}
    
    L --&gt; L1[用户勾选同意协议]
    L1 --&gt; M
    
    M --&gt;|是| N[跳转完善信息页面]
    M --&gt;|否| O[跳转到目标页面]
    
    N --&gt; N1[显示头像上传区域]
    N1 --&gt; N2[用户上传头像或使用默认]
    N2 --&gt; N3[输入姓名]
    N3 --&gt; N4[选择性别：男/女]
    N4 --&gt; N5[点击生日设置]
    N5 --&gt; N6[显示生日确认弹窗]
    N6 --&gt; N7[用户确认生日信息]
    N7 --&gt; N8[显示公历/农历选择]
    N8 --&gt; N9[显示时间滚轮选择器]
    N9 --&gt; N10[用户选择具体时间]
    N10 --&gt; N11[点击确定]
    N11 --&gt; N12[显示生日确认信息]
    N12 --&gt; N13{用户确认}
    N13 --&gt;|确认无误| N14[点击注册完成]
    N13 --&gt;|返回修改| N8
    
    N14 --&gt; N15[保存用户信息]
    N15 --&gt; N16[显示注册成功]
    N16 --&gt; O
    
    O --&gt; C
</div><h3 id="420-生日设置详细流程">4.20 生日设置详细流程 </h3>
<div class="mermaid">flowchart TD
    A[用户点击生日设置] --&gt; B[显示生日确认弹窗]
    B --&gt; C[提示：请确认输入的时间是否正确]
    C --&gt; D{用户操作}
    
    D --&gt;|返回修改| E[关闭弹窗返回信息页面]
    D --&gt;|确认无误| F[进入生日选择器]
    
    F --&gt; G[显示公历/农历切换按钮]
    G --&gt; H[默认选择公历]
    H --&gt; I[显示时间滚轮选择器]
    
    I --&gt; J[年份选择滚轮]
    J --&gt; K[月份选择滚轮]
    K --&gt; L[日期选择滚轮]
    L --&gt; M[时辰选择滚轮]
    M --&gt; N[分钟选择滚轮]
    
    N --&gt; O{用户切换历法}
    O --&gt;|切换到农历| P[显示农历选择器]
    O --&gt;|保持公历| Q[继续公历选择]
    
    P --&gt; P1[农历年份选择]
    P1 --&gt; P2[农历月份选择]
    P2 --&gt; P3[农历日期选择]
    P3 --&gt; P4[时辰选择]
    P4 --&gt; P5[分钟选择]
    P5 --&gt; Q
    
    Q --&gt; R[用户完成时间选择]
    R --&gt; S[点击确定按钮]
    S --&gt; T[显示最终确认信息]
    T --&gt; U[显示公历和农历对应时间]
    U --&gt; V{用户最终确认}
    
    V --&gt;|取消| W[返回时间选择器]
    V --&gt;|确定| X[保存生日信息]
    
    W --&gt; I
    X --&gt; Y[返回完善信息页面]
    Y --&gt; Z[显示已设置的生日信息]
</div><h3 id="421-登录状态管理流程">4.21 登录状态管理流程 </h3>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; 未登录: 应用启动
    未登录 --&gt; 登录中: 用户发起登录
    
    登录中 --&gt; 微信授权: 选择微信登录
    登录中 --&gt; 账号验证: 选择账号密码登录
    
    微信授权 --&gt; 授权成功: 用户同意授权
    微信授权 --&gt; 授权失败: 用户拒绝授权
    微信授权 --&gt; 授权取消: 用户取消操作
    
    账号验证 --&gt; 验证成功: 账号密码正确
    账号验证 --&gt; 验证失败: 账号密码错误
    
    授权成功 --&gt; 检查用户信息: 获取微信用户信息
    验证成功 --&gt; 检查用户信息: 验证通过
    
    检查用户信息 --&gt; 首次登录: 用户信息不完整
    检查用户信息 --&gt; 已登录: 用户信息完整
    
    首次登录 --&gt; 完善信息: 跳转信息完善页面
    完善信息 --&gt; 已登录: 信息完善完成
    
    授权失败 --&gt; 未登录: 返回登录页面
    授权取消 --&gt; 未登录: 返回登录页面
    验证失败 --&gt; 未登录: 返回登录页面
    
    已登录 --&gt; 登录过期: Token过期
    已登录 --&gt; 主动登出: 用户退出登录
    
    登录过期 --&gt; 未登录: 清除登录状态
    主动登出 --&gt; 未登录: 清除登录状态
    
    note right of 已登录
        用户可以访问所有功能
        自动保存登录状态
        定期刷新Token
    end note
    
    note right of 首次登录
        需要完善个人信息
        设置头像、姓名、性别
        重要：设置准确的生日信息
    end note
</div><hr>
<p><strong>文档状态</strong>：v1.2 精简版本<br>
<strong>最后更新</strong>：2025-09-23<br>
<strong>负责人</strong>：产品经理<br>
<strong>审核人</strong>：技术负责人</p>

      </div>
      
      
    
    
    <script type="module">
// TODO: If ZenUML gets integrated into mermaid in the future,
//      we can remove the following lines.


var MERMAID_CONFIG = ({"startOnLoad":false});
if (typeof MERMAID_CONFIG !== 'undefined') {
  MERMAID_CONFIG.startOnLoad = false
  MERMAID_CONFIG.cloneCssStyles = false
  MERMAID_CONFIG.theme = "default"
}

mermaid.initialize(MERMAID_CONFIG || {})
if (typeof(window['Reveal']) !== 'undefined') {
  function mermaidRevealHelper(event) {
    var currentSlide = event.currentSlide
    var diagrams = currentSlide.querySelectorAll('.mermaid')
    for (var i = 0; i < diagrams.length; i++) {
      var diagram = diagrams[i]
      if (!diagram.hasAttribute('data-processed')) {
        mermaid.init(null, diagram, ()=> {
          Reveal.slide(event.indexh, event.indexv)
        })
      }
    }
  }
  Reveal.addEventListener('slidetransitionend', mermaidRevealHelper)
  Reveal.addEventListener('ready', mermaidRevealHelper)
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
} else {
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
}
</script>
    
    
    
  
    </body></html>